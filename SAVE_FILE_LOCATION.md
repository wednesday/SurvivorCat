# å­˜æ¡£æ–‡ä»¶ä½ç½®è¯´æ˜

## å½“å‰å­˜å‚¨æ–¹å¼

ä½ çš„æ¸¸æˆå­˜æ¡£ç›®å‰**ä½¿ç”¨ LocalStorage å­˜å‚¨**ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ç³»ç»Ÿã€‚

## å­˜æ¡£æ•°æ®ä½ç½®

### LocalStorage (å½“å‰ä½¿ç”¨)
å­˜æ¡£æ•°æ®å­˜å‚¨åœ¨ Tauri çš„ WebView LocalStorage æ•°æ®åº“ä¸­ï¼š

**å®Œæ•´è·¯å¾„ï¼š**
```
C:\Users\wedne\AppData\Local\com.phaser.game\EBWebView\Default\Local Storage\leveldb\
```

å­˜æ¡£æ•°æ®åœ¨ LevelDB æ•°æ®åº“æ–‡ä»¶ä¸­ï¼ˆå¦‚ `000025.ldb`ï¼‰ï¼Œé”®åä¸º `survivor_cat_save`ã€‚

**å­˜æ¡£å†…å®¹ç¤ºä¾‹ï¼š**
```json
{
  "totalCoins": 15328,
  "permanentUpgrades": { ... },
  "statistics": { ... },
  "equipment": { ... },
  "inventory": [ ... ]
}
```

### æ–‡ä»¶ç³»ç»Ÿ (ç›®æ ‡ä½†æœªä½¿ç”¨)
ä»£ç ä¸­è®¾è®¡çš„æ–‡ä»¶å­˜å‚¨ä½ç½®åº”è¯¥æ˜¯ï¼š
```
C:\Users\wedne\AppData\Roaming\com.phaser.game\survivor_cat_save.json
```

**ä½†è¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨**ï¼Œå› ä¸º Tauri ç¯å¢ƒæ£€æµ‹å¯èƒ½å¤±è´¥ï¼Œå¯¼è‡´å›é€€åˆ° LocalStorageã€‚

## å¦‚ä½•æŸ¥çœ‹å­˜æ¡£æ•°æ®

### æ–¹æ³• 1ï¼šä½¿ç”¨æ¸¸æˆå†…æŒ‰é’®ï¼ˆæ¨èï¼‰
1. å¯åŠ¨æ¸¸æˆ
2. è¿›å…¥å®‰å…¨å±‹åœºæ™¯
3. ç‚¹å‡»å³ä¸Šè§’çš„ **"ğŸ“ å­˜æ¡£ä½ç½®"** æŒ‰é’®
4. ä¼šæ˜¾ç¤ºè¯¦ç»†çš„å­˜æ¡£ä¿¡æ¯å’Œä½ç½®

### æ–¹æ³• 2ï¼šæµè§ˆå™¨å¼€å‘è€…å·¥å…·
1. åœ¨æ¸¸æˆè¿è¡Œæ—¶æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. è½¬åˆ° "Application" æˆ– "å­˜å‚¨" é€‰é¡¹å¡
3. æ‰¾åˆ° "Local Storage" â†’ `http://localhost:5173`
4. æŸ¥æ‰¾é”®å `survivor_cat_save`

### æ–¹æ³• 3ï¼šç›´æ¥è®¿é—®æ•°æ®åº“æ–‡ä»¶
LocalStorage æ•°æ®åœ¨ LevelDB æ•°æ®åº“ä¸­ï¼Œä¸æ˜¯çº¯æ–‡æœ¬æ ¼å¼ï¼Œéœ€è¦ä¸“é—¨çš„å·¥å…·æ¥è¯»å–ã€‚

## ä¸ºä»€ä¹ˆä¸æ˜¯æ–‡ä»¶ï¼Ÿ

å¯èƒ½çš„åŸå› ï¼š
1. **Tauri æƒé™é—®é¢˜** - `@tauri-apps/plugin-fs` å¯èƒ½æ²¡æœ‰æ­£ç¡®é…ç½®
2. **ç¯å¢ƒæ£€æµ‹å¤±è´¥** - `window.__TAURI__` æ£€æµ‹è¿”å› false
3. **å¯¼å…¥å¤±è´¥** - åŠ¨æ€å¯¼å…¥ Tauri æ’ä»¶å¯èƒ½å¤±è´¥

## å¦‚ä½•å¯ç”¨æ–‡ä»¶å­˜å‚¨

éœ€è¦æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

### 1. ç¡®ä¿ Tauri æ’ä»¶å·²é…ç½®
åœ¨ `src-tauri/Cargo.toml` ä¸­åº”è¯¥æœ‰ï¼š
```toml
[dependencies]
tauri-plugin-fs = "2.x"
```

### 2. åœ¨ Tauri é…ç½®ä¸­å¯ç”¨æƒé™
åœ¨ `src-tauri/capabilities/default.json` æˆ– `tauri.conf.json` ä¸­ï¼š
```json
{
  "permissions": [
    "fs:allow-appdata-read",
    "fs:allow-appdata-write"
  ]
}
```

### 3. æ£€æŸ¥ SaveManager æ—¥å¿—
è¿è¡Œæ¸¸æˆæ—¶æŸ¥çœ‹æ§åˆ¶å°ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
```
[SaveManager] Tauri environment detected: true/false
[SaveManager] Successfully saved to file: survivor_cat_save.json
```

## å¤‡ä»½ä½ çš„å­˜æ¡£

è™½ç„¶æ•°æ®åœ¨ LocalStorage ä¸­ï¼Œä½†å®ƒä¼šéšç€æ¸¸æˆæ•°æ®ä¸€èµ·ä¿å­˜ã€‚å¦‚æœéœ€è¦æ‰‹åŠ¨å¤‡ä»½ï¼š

1. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. æ‰¾åˆ° LocalStorage ä¸­çš„ `survivor_cat_save`
3. å¤åˆ¶å®Œæ•´çš„ JSON å­—ç¬¦ä¸²ä¿å­˜åˆ°æ–‡æœ¬æ–‡ä»¶

## æ›´æ–°æ—¥å¿—

- **2025-12-05**: æ·»åŠ äº†æ¸¸æˆå†…å­˜æ¡£ä½ç½®æŸ¥çœ‹æŒ‰é’®
- **2025-12-05**: å‘ç°å­˜æ¡£ä½¿ç”¨ LocalStorage è€Œéæ–‡ä»¶ç³»ç»Ÿ
